<!DOCTYPE HTML>
<html lang="ja">
<head>
	<meta charset="UTF-8"/>
	<title><: $show.title :></title>
    <link rel="stylesheet" href="/plugin/slideshow/default.css" />
    <style type="text/css">
    </style>
</head>

<body>

<div id="container">

    :format_from_xatena($show.content) | raw

    <nav id="controller">
    </nav>

    <footer id="global-footer">
        <p></p>
    </footer>
</div>

</body>

<script type="text/javascript" src="/plugin/jquery-1.6.4.min.js"></script>
<script type="text/javascript" src="/plugin/slideshow/jquery.slideshow.js"></script>
<script type="text/javascript">
$(function(){
    var sl = $.slideShow({
        section_tag: 'section',
        title_tag  : ':not(article)',
        content_tag: 'article',
    });

    // controller
    $(window)
        .slideControllerKeys({mode:'next', keys:[13, 39, 78]})
        .slideControllerKeys({mode:'back', keys:[37, 66, 80]});

    $('#controller > #next').slideControllerButton({mode:'next'});
    $('#controller > #back').slideControllerButton({mode:'back'});

    //var rid = 'aaa';
    //var socket = new WebSocket('ws://slide-plus.ry-m.com/slide/controller/'+rid+'/'+0);
    //var socket = new WebSocket("ws://slide-plus.ry-m.com/ws");
    var socket = new WebSocket("<: $c.url_for('ws').to_abs :>");

    socket.onopen = function() {
        alert('open websocket');
    };

    socket.onmessage = function (){
    };


});
</script>

</html>
